'use client';
import{j as y}from"./jsx-runtime-BjG_zV1W.js";import{r as g}from"./index-BWu4c2F4.js";import{c as Qt}from"./lite-DaUVFjkg.js";import{C as Zt}from"./index-BTPDvBi0.js";import{u as te}from"./index-BtN5BFRV.js";import{aK as ee,au as oe,aF as ie,aG as ne}from"./Card-KeqL4nDM.js";var re=Object.defineProperty,wt=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,xt=(t,e,o)=>e in t?re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,le=(t,e)=>{for(var o in e||(e={}))ae.call(e,o)&&xt(t,o,e[o]);if(wt)for(var o of wt(e))se.call(e,o)&&xt(t,o,e[o]);return t},tt=typeof window<"u"&&typeof window.document<"u"&&typeof window.navigator<"u",ue=tt&&/android/i.test(navigator.userAgent),Pt=tt&&/iPad|iPhone|iPod/.test(navigator.userAgent),It;tt&&/^Mac/i.test(((It=navigator.userAgentData)==null?void 0:It.platform)||navigator.platform);var de="outline: 1px dotted; outline: 5px auto Highlight; outline: 5px auto -webkit-focus-ring-color",ce=typeof HTMLElement>"u"?class{}:HTMLElement;function c(t,e,o){return o===void 0?t.getAttribute(e):(o===null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o),null)}var Dt=(t,e,o)=>{for(const i of o[0].split(","))o[0]=i,Element.prototype[`${t}EventListener`].apply(e,o)},et=(t,...e)=>Dt("add",t,e),pe=(t,...e)=>Dt("remove",t,e),W=new WeakMap,ut=(t,e)=>{if(e===void 0)return W.get(t);try{W.get(t).disconnect(),W.delete(t)}catch{}if(e){const o=new MutationObserver(i=>t.handleEvent({type:"mutation",detail:i}));o.observe(t,e),W.set(t,o)}},ve=t=>{var e;const o=t.key===" "||t.key==="Enter";return o&&((e=t.preventDefault)==null||e.call(t)),o&&t.target instanceof HTMLElement&&t.target.dispatchEvent(new MouseEvent("click",t)),o},Mt=t=>{var e;const o=((e=t.getRootNode)==null?void 0:e.call(t))||t.ownerDocument;return o instanceof Document||o instanceof ShadowRoot?o:document},fe=0,$t=t=>t?(t.id||(t.id=`:${t.nodeName.toLowerCase()}${(++fe).toString(32)}`),t.id):"",P=(t,e,o)=>{const i=document.createElement(t);if(e&&(i[t==="style"?"textContent":"innerHTML"]=e),o)for(const[n,r]of Object.entries(o))c(i,n,r);return i},he={define:(t,e)=>!tt||window.customElements.get(t)||window.customElements.define(t,e)},me=t=>{var e;const o=c(t,"aria-label")||"";return[...(((e=c(t,"aria-labelledby"))==null?void 0:e.trim().split(/\s+/))||[]).map(n=>document.getElementById(n)),...Array.from(t.labels||[])].reduce((n,r)=>{var a;return n||((a=r==null?void 0:r.innerText)==null?void 0:a.trim())||""},o)},L,ge=0,ft=t=>{L||(L=P("div"),L.style.cssText="position:fixed;overflow:hidden;width:1px;white-space:nowrap",c(L,"aria-live","assertive")),L.isConnected||document.body.append(L),t&&(L.textContent=`${t}${ge++%2?" ":""}`)},Rt=(t,e,o="")=>{var i,n;const r={bubbles:!0,composed:!0,data:e,inputType:o},a=HTMLInputElement.prototype;t.dispatchEvent(new InputEvent("beforeinput",r)),(n=(i=Object.getOwnPropertyDescriptor(a,"value"))==null?void 0:i.set)==null||n.call(t,e),t.dispatchEvent(new InputEvent("input",r)),t.dispatchEvent(new Event("change",{bubbles:!0}))},rt=!1,ht=t=>((t==null?void 0:t.type)==="mouseup"&&(rt=!1),(t==null?void 0:t.type)==="mousedown"&&(rt=!0,et(document,"mouseup",ht,{once:!0})),rt),be=`:host(:not([hidden])) { display: block; -webkit-tap-highlight-color: rgba(0, 0, 0, 0) } /* Must be display block in Safari to allow focus inside */
:host(:not([data-multiple])) ::slotted(data),
:host([data-multiple="false"]) ::slotted(data) { display: none } /* Hide data if not multiple */
[role="listbox"] { position: absolute } /* Avoid affecting CSS like flex on the <u-combobox> */
::slotted(input[inputmode="none"]) { outline: none } /* Hide temporary foucs outline flash */
::slotted(del) { text-decoration: none }
::slotted(data:not([hidden])) { display: inline-block; pointer-events: none }
::slotted(data)::after { content: '\\00D7'; content: '\\00D7' / ''; padding-inline: .5ch; pointer-events: auto; cursor: pointer }
::slotted(data:focus) { ${de} }`,St="beforeinput,blur,focus,click,input,keydown,mousedown",Nt={once:!0,capture:!0,passive:!0},q="false",Y=ue||Pt,Ct="​".repeat(5),Ht="deleteContentBackward",_e="insertText",Ee=" ",z={added:"Added",empty:"No selected",found:"Navigate left to find %d selected",invalid:"Invalid value",items:"Selected",of:"of",remove:"Press to remove",removed:"Removed"},ye=class extends ce{constructor(){super(),this._item="",this._speak="",this._texts=le({},z),this._value="",this.shadowRoot||this.attachShadow({mode:"open"}).append(P("slot",null,{"aria-orientation":"horizontal",tabindex:"-1",role:"listbox",name:"items"}),P("slot"),P("div",'<div role="option" tabindex="-1"></div>',{"aria-hidden":"true",role:"listbox"}),P("style",be))}static get observedAttributes(){return Object.keys(z).map(t=>`data-sr-${t}`)}connectedCallback(){this._root=Mt(this),et(this,St,this,!0),ut(this,{attributeFilter:["value","id","role"],attributes:!0,characterData:!0,childList:!0,subtree:!0}),setTimeout(Q,0,this),setTimeout(ot,0,this)}attributeChangedCallback(t,e,o){const i=t.split("data-sr-")[1];z[i]&&(this._texts[i]=o||z[i])}disconnectedCallback(){ut(this,!1),pe(this,St,this,!0),this._items=this._clear=this._focus=this._control=void 0,this._list=this._options=this._root=this._form=void 0}handleEvent(t){const e=t.target;mt(this)||(t.type==="beforeinput"&&(this._value=(e==null?void 0:e.value)||""),t.type==="blur"&&xe(this),t.type==="click"&&$e(this,t),t.type==="focus"&&we(this,t),t.type==="input"&&Se(this,t),t.type==="keydown"&&Ce(this,t),t.type==="mousedown"&&ht(t),t.type==="mutation"&&Q(this,t))}get multiple(){var t;return((t=c(this,"data-multiple"))!=null?t:q)!==q}set multiple(t){c(this,"data-multiple",t?"":null)}get creatable(){var t;return((t=c(this,"data-creatable"))!=null?t:q)!==q}set creatable(t){c(this,"data-creatable",t?"":null)}get control(){var t;return(t=this._control)!=null&&t.isConnected||(this._control=this.querySelector("input")),this._control}get list(){var t;return(t=this._list)!=null&&t.isConnected||(this._list=this.querySelector('datalist,[role="listbox"]')),this._list}get clear(){var t;return(t=this._clear)!=null&&t.isConnected||(this._clear=this.querySelector("del")),this._clear}get items(){return this._items||(this._items=this.getElementsByTagName("data")),this._items}get options(){var t,e;if(!this._options){const o=(e=(t=this.list)==null?void 0:t.querySelector('[role="option"],option'))==null?void 0:e.nodeName;o&&(this._options=this.getElementsByTagName(o))}return this._options}get values(){return[...this.items].map(({value:t})=>t)}},A=t=>{var e;return((e=t==null?void 0:t.textContent)==null?void 0:e.trim())||""},at=t=>t instanceof HTMLDataElement,mt=({control:t})=>(t==null?void 0:t.disabled)||(t==null?void 0:t.readOnly)||!1,Q=(t,e)=>{var o,i;const{_focus:n,_texts:r,items:a,control:l,list:u,multiple:d}=t;if(!l)return;const p=me(l),f=p.endsWith(Ct)?c(l,"data-label"):p;c(l,"data-label",f);let s=`${f}${d?`, ${a.length?r.found.replace("%d",`${a.length}`):r.empty}`:""}`;const v=[];for(const{addedNodes:b,removedNodes:I}of(e==null?void 0:e.detail)||[]){for(const _ of b)at(_)&&v.unshift(_);for(const _ of I)at(_)&&v.push(_)}const E=d?v.length===1:v[0]===n;if(n&&E){const b=c(l,"aria-expanded"),I=c(l,"inputmode"),_=at(n)?l:n,x=!v[0].isConnected;t._speak=`${r[x?"removed":"added"]} ${A(v[0])}, `,(Y||n===l)&&ft(t._speak),l!==_&&(Y&&c(l,"aria-expanded",null),Y&&c(l,"inputmode","none"),s=Ee,l.focus()),setTimeout(()=>{var $;c(l,"aria-expanded",b),c(l,"inputmode",x?"none":I),($=_==null?void 0:_.focus)==null||$.call(_),c(l,"inputmode",I),t._speak="",Y?setTimeout(Q,100,t):et(t,"blur",()=>Q(t),Nt)},100)}let k=0;const w=t.querySelector("select"),F=mt(t)?"":r.remove,V=(o=t.shadowRoot)==null?void 0:o.firstElementChild;V&&c(V,"aria-label",r.items);for(const b of a){const I=w==null?void 0:w.options[k++],_=A(b),x=b.value||_,$=`${t._speak}${_}, ${F}`;c(b,"aria-label",$),c(b,"aria-selected","true"),c(b,"role","option"),c(b,"slot","items"),c(b,"tabindex","-1"),c(b,"value",x),I?Object.assign(I,{textContent:_,value:x}):w==null||w.appendChild(new Option(_,x,!0,!0)),Pt&&c(b,"title",`${k} ${r.of} ${a.length}`)}w&&c(w,"multiple",d?"":null);for(const b of[...(w==null?void 0:w.options)||[]].slice(k))b.remove();!d&&k>1&&console.warn(t," Multiple <data> found in single mode."),u&&(c(u,"aria-multiselectable",`${d}`),c(l,"list",$t(u)),c(l,"aria-label",`${t._speak}${s}${Ct}`),u.hasAttribute("popover")&&(c(l,"popovertarget",$t(u)),c(u,"popover","manual")),u._of=r.of);const K=A(a[0]);K!==t._item&&ot(t),t._item=K,jt(t),Ut(t),(i=ut(t))==null||i.takeRecords()},jt=t=>{var e;t.clear&&c(t.clear,"role","button"),t.clear&&(t.clear.hidden=!((e=t.control)!=null&&e.value)||mt(t))},Ut=t=>{var e;const{_speak:o,options:i=[],values:n}=t;for(const r of i){const a=(e=c(r,"value"))!=null?e:A(r);c(r,"aria-label",o?`${o}${A(r)}`:null),c(r,"selected",n.includes(a)?"":null)}},ot=t=>{const{multiple:e,control:o,items:i}=t,n=A(i[0]);!e&&o&&n!==o.value&&Rt(o,n,n?_e:Ht)},gt=(t,e=!0)=>{var o;const{_texts:i,options:n=[],creatable:r,control:a,items:l,multiple:u}=t,d=((o=a==null?void 0:a.value)==null?void 0:o.trim())||"",p=d.toLowerCase()||null;let f=[...n].find(v=>(c(v,"label")||A(v)).trim().toLowerCase()===p);const s={bubbles:!0,cancelable:!0,detail:f};if(t.dispatchEvent(new CustomEvent("comboboxbeforematch",s))||(f=[...n].find(v=>v.selected)),e)return Ut(t),f?D(t,f,!1):r&&d?D(t,{value:d},!1):(!u&&!d&&l[0]?D(t,l[0]):ot(t),ft(i.invalid));for(const v of n)v.selected=v===f},D=(t,e,o=!0)=>{var i,n,r;const{control:a,items:l,multiple:u}=t,d=P("data",e.label||e.value,{value:e.value}),p=[...l].find(v=>v.value===e.value),f={bubbles:!0,cancelable:!0,detail:p||d};if(p&&!o)return ot(t);if(p===((i=Mt(t))==null?void 0:i.activeElement)&&((r=(n=t.shadowRoot)==null?void 0:n.querySelector('[role="option"]'))==null||r.focus()),t.dispatchEvent(new CustomEvent("comboboxbeforeselect",f))){if(!u)for(const v of[...l])v.remove();p?p.remove():a==null||a.insertAdjacentElement("beforebegin",d),t.dispatchEvent(new CustomEvent("comboboxafterselect",f))}},we=(t,{target:e})=>{const{_form:o,control:i,multiple:n}=t;e instanceof HTMLElement&&(t._focus=e),n&&o===void 0&&i&&e===i&&(t._form=c(i,"form"),c(i,"form","#")),ft()},xe=t=>ht()||setTimeout(Ie,0,t),Ie=t=>{const{_focus:e,_root:o,_form:i,multiple:n,control:r}=t;!e||t.contains(o==null?void 0:o.activeElement)||(n||gt(t),i&&r&&c(r,"form",i),t._focus=t._form=void 0)},$e=(t,e)=>{const{clientX:o,clientY:i,target:n}=e,{clear:r,control:a,items:l}=t;if(r!=null&&r.contains(n))return a&&Rt(a,"",Ht),a==null?void 0:a.focus();for(const u of l){const{top:d,right:p,bottom:f,left:s}=u.getBoundingClientRect();if(u.contains(n))return D(t,u);if(i>=d&&i<=f&&o>=s&&o<=p)return u.focus()}n===t&&(a==null||a.focus())},Se=(t,e)=>{var o;const{options:i=[],control:n,multiple:r}=t,a=((o=n==null?void 0:n.value)==null?void 0:o.trim())||"";if(e instanceof InputEvent?!e.inputType||e.inputType==="insertReplacementText":!!a){e.stopImmediatePropagation(),n&&(n.value=t._value);for(const u of i)if(u.value&&u.value===a)return D(t,u,r)}else r||gt(t,!1);jt(t)},Ce=(t,e)=>{var o;const{clear:i,control:n,items:r}=t,{key:a,repeat:l,target:u}=e,d=n&&n===u,p=d&&n.selectionEnd,f=e.ctrlKey||e.metaKey||e.shiftKey||e.key==="Alt";let s=d?r.length:[...r].indexOf(u);if(d&&a==="Tab"&&!e.shiftKey&&i&&!i.hidden&&(e.preventDefault(),i.tabIndex=0,i.focus(),et(i,"blur",()=>c(i,"tabindex",null),Nt)),!(!d&&ve(e)||s===-1||f)){if(a==="ArrowRight"&&!d)s+=1;else if(a==="ArrowLeft"&&!p)s-=1;else{if(a==="Enter"&&d)return gt(t);if(a==="Backspace"&&!p){if(e.preventDefault(),!l&&r[s])return D(t,r[s]);d&&(s-=1)}else return d||(n==null?void 0:n.focus())}e.preventDefault(),(o=r[Math.max(0,s)]||n)==null||o.focus()}};he.define("u-combobox",ye);const Te=t=>{var e;return((e=t.textContent)==null?void 0:e.trim())||""},H=(t=[])=>typeof t=="string"?[{label:t,value:t}]:Array.isArray(t)?t.map(e=>typeof e=="string"?{label:e,value:e}:e):[t],Le=(t,e,o)=>{const i={label:Te(t),value:t.value};return o?t.isConnected?H(e).filter(({value:n})=>n!==i.value):[...H(e),i]:t.isConnected?void 0:i},Oe=({label:t,input:e})=>t.toLowerCase().includes(e.value.trim().toLowerCase()),Ae=g.forwardRef(function({children:e,className:o,creatable:i=!1,defaultSelected:n,filter:r=!0,multiple:a=!1,name:l,onBeforeMatch:u,onSelectedChange:d,renderSelected:p=({label:E})=>E,selected:f,...s},v){const E=g.useRef(null),k=g.useId(),w=s.id?`${s.id}-select`:k,F=f!==void 0,V=te([v,E]),[K,b]=g.useState(!1),[I,_]=g.useState(H(n)),x=f?H(f):I,$=g.useRef(d);g.useEffect(()=>{$.current=d},[d]),g.useEffect(()=>{const m=E.current,C=T=>{var yt;T.preventDefault();const X=m==null?void 0:m.multiple,R=T.detail,S=Le(R,x,X);F?(yt=$.current)==null||yt.call($,S):_(H(S))};return m==null||m.addEventListener("comboboxbeforeselect",C),()=>m==null?void 0:m.removeEventListener("comboboxbeforeselect",C)},[x,F]),g.useEffect(()=>{const m=E.current,C=T=>u==null?void 0:u(T);return m==null||m.addEventListener("comboboxbeforematch",C),()=>m==null?void 0:m.removeEventListener("comboboxbeforematch",C)},[u]);const Jt=g.useCallback(()=>{const{control:m,options:C=[]}=(E==null?void 0:E.current)||{},T=r===!0?Oe:r;let X=0,R=0;for(const S of C)S.hasAttribute("data-empty")||(T&&m&&(S.disabled=!T({index:R,input:m,label:S.label,optionElement:S,text:S.text,value:S.value})&&!!++X),R++);b(R===X)},[r]);return y.jsx(it.Provider,{value:{isEmpty:K,handleFilter:Jt,uComboboxRef:E},children:y.jsxs("u-combobox",{"data-multiple":a||void 0,"data-creatable":i||void 0,class:Qt("ds-suggestion",o),ref:V,...s,children:[x.map(m=>y.jsx(Zt.Removable,{value:m.value,asChild:!0,children:y.jsx("data",{children:p(m)})},m.value)),e,!!l&&y.jsx("select",{name:l,multiple:!0,hidden:!0,id:w})]})})}),it=g.createContext({handleFilter:()=>{}}),ke=g.forwardRef(function({"aria-label":e="Tøm",...o},i){return y.jsx(ee,{"aria-label":e,asChild:!0,icon:!0,hidden:!0,ref:i,variant:"tertiary",...o,children:y.jsx("del",{})})}),Pe=g.forwardRef(function(e,o){const{isEmpty:i}=g.useContext(it);return i?y.jsx("u-option",{"data-empty":!0,value:"",ref:o,...e}):null}),De=g.forwardRef(function({value:e,onInput:o,onChange:i,...n},r){const{handleFilter:a}=g.useContext(it);return g.useEffect(a,[e]),i&&console.warn("SuggestionInput: Avoid using onChange, as Suggestion controls the Input. Use onValueChange on Suggest instead, or onInput if fetching API results"),e&&console.warn("SuggestionInput: Avoid using value, as Suggestion controls the Input. Use value on Suggest instead."),y.jsx(oe,{placeholder:"",ref:r,onInput:l=>{o==null||o(l),a==null||a()},...n})});var Me=Object.defineProperty,Tt=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Lt=(t,e,o)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,He=(t,e)=>{for(var o in e||(e={}))Re.call(e,o)&&Lt(t,o,e[o]);if(Tt)for(var o of Tt(e))Ne.call(e,o)&&Lt(t,o,e[o]);return t},B=typeof window<"u"&&typeof window.document<"u"&&typeof window.navigator<"u",nt=B&&/android/i.test(navigator.userAgent),bt=B&&/iPad|iPhone|iPod/.test(navigator.userAgent),Ot;B&&/^Mac/i.test(((Ot=navigator.userAgentData)==null?void 0:Ot.platform)||navigator.platform);var je=`${nt?"data":"aria"}-labelledby`,Ue=":host(:not([hidden])) { display: block }",Be="outline: 1px dotted; outline: 5px auto Highlight; outline: 5px auto -webkit-focus-ring-color",Bt=typeof HTMLElement>"u"?class{}:HTMLElement;function h(t,e,o){return o===void 0?t.getAttribute(e):(o===null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o),null)}var Ft=(t,e,o)=>{for(const i of o[0].split(","))o[0]=i,Element.prototype[`${t}EventListener`].apply(e,o)},j=(t,...e)=>Ft("add",t,e),Z=(t,...e)=>Ft("remove",t,e),Fe=(t,e)=>t.shadowRoot||t.attachShadow({mode:"open"}).append(pt("slot"),pt("style",e)),G=new WeakMap,dt=(t,e)=>{if(e===void 0)return G.get(t);try{G.get(t).disconnect(),G.delete(t)}catch{}if(e){const o=new MutationObserver(i=>t.handleEvent({type:"mutation",detail:i}));o.observe(t,e),G.set(t,o)}},Vt=t=>{var e;const o=((e=t.getRootNode)==null?void 0:e.call(t))||t.ownerDocument;return o instanceof Document||o instanceof ShadowRoot?o:document},Ve=0,ct=t=>t?(t.id||(t.id=`:${t.nodeName.toLowerCase()}${(++Ve).toString(32)}`),t.id):"",pt=(t,e,o)=>{const i=document.createElement(t);return e&&(i[t==="style"?"textContent":"innerHTML"]=e),i},Kt={define:(t,e)=>!B||window.customElements.get(t)||window.customElements.define(t,e)},O,Ke=0,Xt=t=>{O||(O=pt("div"),O.style.cssText="position:fixed;overflow:hidden;width:1px;white-space:nowrap",h(O,"aria-live","assertive")),O.isConnected||document.body.append(O),t&&(O.textContent=`${t}${Ke++%2?" ":""}`)},Xe=(t,e,o="")=>{var i,n;const r={bubbles:!0,composed:!0,data:e,inputType:o},a=HTMLInputElement.prototype;t.dispatchEvent(new InputEvent("beforeinput",r)),(n=(i=Object.getOwnPropertyDescriptor(a,"value"))==null?void 0:i.set)==null||n.call(t,e),t.dispatchEvent(new InputEvent("input",r)),t.dispatchEvent(new Event("change",{bubbles:!0}))},st=!1,_t=t=>((t==null?void 0:t.type)==="mouseup"&&(st=!1),(t==null?void 0:t.type)==="mousedown"&&(st=!0,j(document,"mouseup",_t,{once:!0})),st),lt="disabled",N="selected",We=class extends Bt{static get observedAttributes(){return[lt,N]}connectedCallback(){bt||(this.tabIndex=-1),this.hasAttribute("role")||h(this,"role","option"),this.attributeChangedCallback()}attributeChangedCallback(){h(this,"aria-disabled",`${this.disabled}`),h(this,"aria-selected",`${this.selected}`)}get defaultSelected(){return this[N]}set defaultSelected(t){this[N]=t}get disabled(){return h(this,lt)!==null}set disabled(t){h(this,lt,t?"":null)}get form(){return this.closest("form")}get index(){var t;return[...((t=this.parentElement)==null?void 0:t.options)||[this]].indexOf(this)}get label(){var t;return(t=h(this,"label"))!=null?t:this.text}set label(t){h(this,"label",t)}get selected(){return h(this,N)!==null}set selected(t){h(this,N,t?"":null)}get text(){var t;return((t=this.textContent)==null?void 0:t.trim())||""}set text(t){this.textContent=t}get value(){var t;return(t=h(this,"value"))!=null?t:this.text}set value(t){h(this,"value",t)}};Kt.define("u-option",We);var qe=`${Ue}
::slotted([role="option"]) { display: block; cursor: pointer }
::slotted([role="option"]:focus) { ${Be} }
::slotted([role="option"][aria-hidden="true"]),
::slotted([role="option"][disabled]),
::slotted([role="option"][hidden]) { display: none !important }`,At,kt=0,Ye=bt||nt,Wt="click,focusout,input,keydown,mousedown,mouseup",qt="focus,focusin,blur,focusout",J={singular:"%d hit",plural:"%d hits"},ze=class extends Bt{constructor(){super(),this._texts=He({},J),this._value="",this._of="/",Fe(this,qe)}static get observedAttributes(){return["id",...Object.keys(J).map(t=>`data-sr-${t}`)]}connectedCallback(){this.hidden=!0,this._root=Vt(this),h(this,"role","listbox"),h(this,"tabindex","-1"),j(this._root,"focusin",this),j(this._root,"focus",this,!0),dt(this,{attributeFilter:["disabled","hidden","label","value"],attributes:!0,characterData:!0,childList:!0,subtree:!0}),setTimeout(()=>this.attributeChangedCallback())}disconnectedCallback(){Z(this._root||this,"focus",this,!0),Z(this._root||this,"focusin",this),dt(this,!1),Et(this),this._root=void 0}attributeChangedCallback(t,e,o){const i=t==null?void 0:t.split("data-sr-")[1],n=`input[list="${this.id}"]`;if(J[i])this._texts[i]=o||J[i];else if(this._root){this._input&&vt(this,this._input);for(const r of this._root.querySelectorAll(n))vt(this,r)}}handleEvent(t){const{target:e,type:o}=t;t.defaultPrevented||(o==="click"&&Qe(this,t),(o==="focus"||o==="focusin")&&Ge(this,t),(o==="blur"||o==="focusout")&&Je(this,t),o==="keydown"&&Ze(this,t),o==="mousedown"&&this.contains(e)&&_t(t),(o==="mutation"||o==="input")&&(clearTimeout(kt),kt=setTimeout(Gt,0,this,t)))}get options(){var t;if(!this._options){const e=(t=this.querySelector('[role="option"],option'))==null?void 0:t.nodeName;e&&(this._options=this.getElementsByTagName(e))}return this._options||this.getElementsByTagName("option")}},Yt=t=>(t==null?void 0:t.disabled)||(t==null?void 0:t.readOnly)||!1,U=(t,e)=>{var o,i,n;if(t.hidden!==e)return;t.hidden=Yt(t==null?void 0:t._input)||!e,(o=dt(t))==null||o.takeRecords();const r=t.isConnected&&t.popover&&((i=t._input)==null?void 0:i.isConnected)&&((n=t._input)==null?void 0:n.popoverTargetElement)===t;t._input&&vt(t,t._input,e),r&&h(t,"popover","manual"),r&&t.togglePopover(e),e&&Gt(t)},Et=t=>{t._input&&(Z(t._input||t,qt,t),Z(t._root||t,Wt,t),U(t,!1),t._input=void 0)},vt=(t,e,o=!1)=>{t.popover&&h(e,"popovertarget",ct(t)),j(e,qt,t,!0),h(e,"aria-autocomplete","list"),h(e,"aria-controls",ct(t)),h(e,"aria-expanded",`${!Ye||o}`),h(e,"autocomplete","off"),h(e,"role",Yt(e)?null:"combobox")},Ge=(t,e)=>{var o;const i=e.target instanceof HTMLInputElement;i&&e.isTrusted&&e.stopImmediatePropagation(),t._input!==e.target&&i&&e.target.list===t&&(t._input&&Et(t),t._input=e.target,t._input.dispatchEvent(new FocusEvent("focus")),t._input.dispatchEvent(new FocusEvent("focusin",{bubbles:!0})),h(t,je,ct((o=t._input.labels)==null?void 0:o[0])),j(t._root||t,Wt,t),U(t,h(t._input,"inputmode")!=="none"),Xt())},Je=(t,e)=>{!nt&&!_t()&&t._input&&setTimeout(zt,0,t),e.target===t._input&&e.isTrusted&&e.stopImmediatePropagation()},zt=t=>{var e;const o=((e=t._root)==null?void 0:e.activeElement)||null,i=t._input;i&&i!==o&&!t.contains(o)&&(i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o})),Et(t))},Qe=(t,{target:e})=>{var o;if(!t._input||t._input===e)return U(t,!0);for(const i of t.options)if(i.contains(e))return h(t,"aria-multiselectable")!=="true"&&((o=t._input)==null||o.focus(),U(t,!1)),Xe(t._input,i.value);nt&&zt(t)},Ze=(t,e)=>{var o;const{key:i,target:n,altKey:r,ctrlKey:a,shiftKey:l,metaKey:u}=e,d=i==="Escape"||i==="Esc";if(r||a||u||l||i==="Tab")return;d&&!t.hidden&&(e==null||e.preventDefault()),U(t,!d);const p=[...t.options].filter(v=>h(v,"aria-hidden")!=="true"&&v.offsetHeight),f=p.indexOf(n);let s=-1;if(i==="ArrowDown"&&(s=(f+1)%p.length),i==="ArrowUp"&&(s=(~f?f:p.length)-1),~f&&((i==="Home"||i==="PageUp")&&(s=0),(i==="End"||i==="PageDown")&&(s=p.length-1),i==="Enter"))return p[f].click(),e.preventDefault();if(p[s])for(const v of p)v.tabIndex=-1;p[s]&&e.preventDefault(),(o=p[s]||t._input)==null||o.focus(),!p[s]&&i==="ArrowUp"&&setTimeout(()=>{var v;return(v=t._input)==null?void 0:v.setSelectionRange(999,999)})},Gt=(t,e)=>{const{_texts:o,_root:i,_input:n,options:r}=t,a=(n==null?void 0:n.value.toLowerCase().trim())||"",l=!t.hasAttribute("data-nofilter"),u=[],d=[];for(const s of r)(s.disabled||s.hidden||l&&!s.label.toLowerCase().includes(a)?u:d).push(s);for(const s of u)h(s,"aria-hidden","true");for(const s of d)h(s,"aria-hidden","false");const p=d.length;clearTimeout(At),(e==null?void 0:e.type)==="input"&&a!==t._value&&(At=setTimeout(()=>{const s=`${!p&&t.innerText.trim()||`${o[p===1?"singular":"plural"]}`.replace("%d",`${p}`)}`;!t.hidden&&(i==null?void 0:i.activeElement)===n&&Xt(s),t._value=a},1e3));let f=0;if(bt)for(const s of d)h(s,"title",`${++f} ${t._of} ${p}`)};B&&Object.defineProperty(HTMLInputElement.prototype,"list",{configurable:!0,enumerable:!0,get(){return Vt(this).getElementById(h(this,"list")||"")}});Kt.define("u-datalist",ze);const to=g.forwardRef(function({singular:e="%d forslag",plural:o="%d forslag",className:i,id:n,...r},a){const{handleFilter:l,uComboboxRef:u}=g.useContext(it);return g.useEffect(l),g.useEffect(()=>{var f,s;const d=(f=u==null?void 0:u.current)==null?void 0:f.control,p=(s=u==null?void 0:u.current)==null?void 0:s.list;if(p&&d)return ie(d,p,()=>{ne(d,p,{placement:"bottom",strategy:"fixed",middleware:[eo]}).then(({x:v,y:E})=>{p.style.translate=`${Math.round(v)}px calc(${Math.round(E)}px + var(--dsc-suggestion-list-gap))`})})},[]),y.jsx("u-datalist",{"data-nofilter":!0,"data-sr-singular":e,"data-sr-plural":o,class:i,ref:a,popover:"manual",...r})}),eo={name:"TriggerWidth",fn(t){const{elements:e,rects:o}=t;return e.floating.style.width=`${o.reference.width}px`,t}},oo=g.forwardRef(function({className:e,...o},i){return y.jsx("u-option",{class:e,ref:i,...o})}),M=Object.assign(Ae,{List:to,Input:De,Empty:Pe,Option:oo,Clear:ke});M.displayName="EXPERIMENTAL_Suggestion";M.List.displayName="EXPERIMENTAL_Suggestion.List";M.Input.displayName="EXPERIMENTAL_Suggestion.Input";M.Empty.displayName="EXPERIMENTAL_Suggestion.Empty";M.Option.displayName="EXPERIMENTAL_Suggestion.Option";M.Clear.displayName="EXPERIMENTAL_Suggestion.Clear";export{M as E};
