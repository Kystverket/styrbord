'use client';
import{r as c}from"./index-BWu4c2F4.js";const x=(g,r)=>{const p=g(),s=!!r(!0).length,o=!!r(!1).length;for(const u of p)u.indeterminate=o&&s,u.checked=!o&&s};function M(g){const{error:r,name:p,onChange:s,value:o=[],disabled:u,readOnly:w,required:C}=g||{},[i,I]=c.useState(o),q=c.useId(),R=c.useId(),m=c.useRef(new Set),k=c.useRef(new Set),f=c.useRef(new Map),l=a=>Array.from(m.current.values()).filter(v=>v.checked===a),b=()=>Array.from(k.current.values());return c.useEffect(()=>{x(b,l)},[i]),{value:i,setValue:I,getCheckboxProps:a=>{const v=typeof a=="string"?{value:a}:a||{},{allowIndeterminate:y=!1,ref:h=void 0,value:d="",...t}=v,A=e=>{if(e)(y?k:m).current.add(e),f.current.set(d,e),b().length&&x(b,l);else{const n=f.current.get(d);n&&(m.current.delete(n),k.current.delete(n),f.current.delete(d))}h&&(typeof h=="function"?h(e):h.current=e)},E=()=>{const e=Array.from(l(!0),({value:n})=>n);I(e),s==null||s(e,i)},G=()=>{const e=f.current.get(d);if(!e)return;const n=!!e.checked;for(const P of l(!n))P.click()};return{...t,"aria-describedby":`${r?R:""} ${t["aria-describedby"]||""}`.trim()||void 0,"aria-invalid":!!r||t["aria-invalid"],checked:y?void 0:i.includes(d),name:t.name||p||q,onChange:e=>{var n;(n=t.onChange)==null||n.call(t,e),!e.defaultPrevented&&(y&&G(),E())},ref:A,value:d,disabled:u||t.disabled,readOnly:w||t.readOnly,required:C||t.required}},validationMessageProps:{children:r,hidden:!r,id:R}}}export{M as u};
